{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["const emailInput = document.querySelector(\"input[type='email']\");\nconst messageInput = document.querySelector(\"textArea[name='message']\");\nconst form = document.querySelector('.feedback-form');\n\n//storage key\nconst formDataKey = 'feedback-form-state';\n\nlet formData = {\n  email: '',\n  message: '',\n};\n\nconst loadData = () => {\n  let dataStr;\n  let loadedData;\n  try {\n    dataStr = sessionStorage.getItem(formDataKey);\n    loadedData = JSON.parse(dataStr);\n  } catch (e) {\n    alert(e);\n  }\n\n  if (!loadedData) return;\n\n  formData = loadedData;\n\n  emailInput.value = formData.email;\n  messageInput.value = formData.message;\n};\n\nconst saveData = formData => {\n  const dataStr = JSON.stringify(formData);\n\n  sessionStorage.setItem(formDataKey, dataStr);\n};\n\nconst submit = e => {\n  e.preventDefault();\n\n  console.log('submit');\n\n  if (e.target.tagName !== 'FORM') return;\n\n  if (!formData.email || !formData.message) {\n    alert('Please, fill all fields!');\n    return;\n  }\n\n  console.log(formData);\n  formData.email = '';\n  formData.message = '';\n  emailInput.value = '';\n  messageInput.value = '';\n  sessionStorage.removeItem(formDataKey);\n};\n\nconst onFormChanged = e => {\n  const target = e.target;\n  const saveDataTags = ['INPUT', 'TEXTAREA'];\n\n  if (saveDataTags.includes(target.tagName)) {\n    formData.email = emailInput.value;\n    formData.message = messageInput.value;\n\n    saveData(formData);\n  }\n};\n\nform.addEventListener('input', onFormChanged);\nform.addEventListener('submit', submit);\n\nloadData();\n"],"names":["emailInput","messageInput","form","formDataKey","formData","loadData","dataStr","loadedData","e","saveData","submit","onFormChanged","target"],"mappings":"wFAAA,MAAMA,EAAa,SAAS,cAAc,qBAAqB,EACzDC,EAAe,SAAS,cAAc,0BAA0B,EAChEC,EAAO,SAAS,cAAc,gBAAgB,EAG9CC,EAAc,sBAEpB,IAAIC,EAAW,CACb,MAAO,GACP,QAAS,EACX,EAEA,MAAMC,EAAW,IAAM,CACrB,IAAIC,EACAC,EACJ,GAAI,CACFD,EAAU,eAAe,QAAQH,CAAW,EAC5CI,EAAa,KAAK,MAAMD,CAAO,CAChC,OAAQE,EAAG,CACV,MAAMA,CAAC,CACR,CAEID,IAELH,EAAWG,EAEXP,EAAW,MAAQI,EAAS,MAC5BH,EAAa,MAAQG,EAAS,QAChC,EAEMK,EAAWL,GAAY,CAC3B,MAAME,EAAU,KAAK,UAAUF,CAAQ,EAEvC,eAAe,QAAQD,EAAaG,CAAO,CAC7C,EAEMI,EAASF,GAAK,CAKlB,GAJAA,EAAE,eAAc,EAEhB,QAAQ,IAAI,QAAQ,EAEhBA,EAAE,OAAO,UAAY,OAEzB,IAAI,CAACJ,EAAS,OAAS,CAACA,EAAS,QAAS,CACxC,MAAM,0BAA0B,EAChC,MACD,CAED,QAAQ,IAAIA,CAAQ,EACpBA,EAAS,MAAQ,GACjBA,EAAS,QAAU,GACnBJ,EAAW,MAAQ,GACnBC,EAAa,MAAQ,GACrB,eAAe,WAAWE,CAAW,EACvC,EAEMQ,EAAgBH,GAAK,CACzB,MAAMI,EAASJ,EAAE,OACI,CAAC,QAAS,UAAU,EAExB,SAASI,EAAO,OAAO,IACtCR,EAAS,MAAQJ,EAAW,MAC5BI,EAAS,QAAUH,EAAa,MAEhCQ,EAASL,CAAQ,EAErB,EAEAF,EAAK,iBAAiB,QAASS,CAAa,EAC5CT,EAAK,iBAAiB,SAAUQ,CAAM,EAEtCL,EAAU"}